# tour de jeu 

# détermination aléatoire du premier dealer

dealer = randint(0, nombre_de_joueurs-1)
print('dealer : ', dealer)

# petite blinde / grosse blinde

if nombre_de_joueurs > 2: #si le nombre de joueurs est supérieur strictement à 2

    if dealer <= nombre_de_joueurs-3:
        petite_blinde = int(input('petite blinde : '))
        while petite_blinde > argent['j'+str(dealer+1)]:
            petite_blinde = int(input('petite blinde : '))
        mise['j'+str(dealer+1)] = petite_blinde

        grosse_blinde = 2*petite_blinde
        a = False
        i = 0
        while a == False:
            if argent['j'+str(dealer+2+i)] > grosse_blinde:
                a = True 
                mise['j'+str(dealer+2+i)] = grosse_blinde
            else:
                i += 1

    elif dealer == nombre_de_joueurs-2:
        petite_blinde = int(input('petite blinde : '))
        while petite_blinde > argent['j'+str(dealer+1)]:
            petite_blinde = int(input('petite blinde : '))
        mise['j'+str(dealer+1)] = petite_blinde

        grosse_blinde = 2*petite_blinde
        a = False
        i = 0
        while a == False:
            if argent['j'+str(i)] > grosse_blinde:
                a = True 
                mise['j'+str(i)] = grosse_blinde
            else:
                i += 1
                
    else:
        petite_blinde = int(input('petite blinde : '))
        while petite_blinde > argent['j0']:
            petite_blinde = int(input('petite blinde : '))
        mise['j0'] = petite_blinde

        grosse_blinde = 2*petite_blinde
        a = False
        i = 0
        while a == False:
            if argent['j'+str(i+1)] > grosse_blinde:
                a = True 
                mise['j'+str(i+1)] = grosse_blinde
            else:
                i += 1 

else: #si le nombre de joueurs est égal à 2
    if dealer == 0: #si le dealer est le j0
        petite_blinde = int(input('petite blinde : '))
        grosse_blinde = 2*petite_blinde
        while petite_blinde > argent['j0'] and grosse_blinde > argent['j1']:
           petite_blinde = int(input('petite blinde : '))
           grosse_blinde = 2*petite_blinde
        mise['j0'] = petite_blinde 
        mise['j1'] = grosse_blinde

    else: #si le dealer est le j1
        petite_blinde = int(input('petite blinde : '))
        grosse_blinde = 2*petite_blinde
        while petite_blinde > argent['j1'] and grosse_blinde > argent['j0']:
           petite_blinde = int(input('petite blinde : '))
           grosse_blinde = 2*petite_blinde
        mise['j1'] = petite_blinde 
        mise['j0'] = grosse_blinde
 

###NOUVEAU

# avec strictement plus de deux joueurs

present = {'j'+str(i) for i in range(nombre_de_joueurs)}
print(present)

# flop

if ((nombre_de_joueurs-1) - (dealer)) < 3:
    joueur_actuel = 'j'+ str((dealer+3)%nombre_de_joueurs)
    numero_joueur_actuel = (dealer+3)%nombre_de_joueurs 
else:
    joueur_actuel = 'j' + str(dealer+3)
    numero_joueur_actuel = dealer+3

mise_minimale = petite_blinde
mise_verif={}
for i in range (0, nombre_de_joueurs):
    mise['j'+str(i)]=0

#vérifier que le tour n'est pas fini

if present != {}:
    verif = mise_verif[random.choice(present)]
    for joueur in present:
        a = mise_verif[joueur]
        if a != verif:
            tour = True
        else :
            tour = False
else:
    tour = False

while tour == True:

    if joueur_actuel in present: #toutes les actions qu'un joueur peut faire
        print('Voici les actions que tu peux faire :')
        if argent[joueur_actuel] >= mise_minimale:
            print("s'aligner")
            print("miser jusqu'à", str(argent[joueur_actuel]))
        print('se coucher')

        a = input('que veux-tu faire ? :', "s'aligner", "miser", "se coucher")
        while a == "s'aligner" or a == 'miser' or a == 'se coucher':
            a = input('que veux-tu faire ? :', "s'aligner", "miser", "se coucher") 
        if a == "s'aligner":
            mise[joueur_actuel] += mise_minimale
            mise_verif[joueur_actuel] = mise_minimale
            mise_minimale = mise_verif[joueur_actuel] 
        elif a == "miser":
            mettre = input('combien veux-tu miser ?', "jusqu'à", argent[joueur_actuel])
            mise[joueur_actuel] += mettre
            mise_verif[joueur_actuel] = mettre
            mise_minimale = mise_verif[joueur_actuel]
        else:
            present.pop(joueur_actuel)

    #changement de joueur_actuel

    if joueur_actuel == 'j'+str(nombre_de_joueurs-1):
        joueur_actuel == 'j0'
    else:
        joueur_actuel == 'j'+ str(numero_joueur_actuel+1)

    if present != {}:
        verif = mise_verif[random.choice(present)]
        for joueur in present:
            a = mise_verif[joueur]
            if a != verif:
                tour = True
            else :
                tour = False
    else:
        tour = False
    
# turn

if dealer != 'j'+str(nombre_de_joueurs-1):
    joueur_actuel = dealer+1
else:
    joueur_actuel = 'j0'

mise_minimale = petite_blinde
mise_verif={}
for i in range (0, nombre_de_joueurs):
    mise['j'+str(i)]=0

#vérifier que le tour n'est pas fini

if present != {}:
    verif = mise_verif[random.choice(present)]
    for joueur in present:
        a = mise_verif[joueur]
        if a != verif:
            tour = True
        else :
            tour = False
else:
    tour = False

while tour == True:

    if joueur_actuel in present: #toutes les actions qu'un joueur peut faire
        print('Voici les actions que tu peux faire :')
        if argent[joueur_actuel] >= mise_minimale:
            print("s'aligner")
            print("miser jusqu'à", str(argent[joueur_actuel]))
        print('se coucher')

        a = input('que veux-tu faire ? :', "s'aligner", "miser", "se coucher")
        while a == "s'aligner" or a == 'miser' or a == 'se coucher':
            a = input('que veux-tu faire ? :', "s'aligner", "miser", "se coucher") 
        if a == "s'aligner":
            mise[joueur_actuel] += mise_minimale
            mise_verif[joueur_actuel] = mise_minimale
            mise_minimale = mise_verif[joueur_actuel] 
        elif a == "miser":
            mettre = input('combien veux-tu miser ?', "jusqu'à", argent[joueur_actuel])
            mise[joueur_actuel] += mettre
            mise_verif[joueur_actuel] = mettre
            mise_minimale = mise_verif[joueur_actuel]
        else:
            present.pop(joueur_actuel)

    #changement de joueur_actuel

    if joueur_actuel == 'j'+str(nombre_de_joueurs-1):
        joueur_actuel == 'j0'
    else:
        joueur_actuel == 'j'+ str(numero_joueur_actuel+1)

    if present != {}:
        verif = mise_verif[random.choice(present)]
        for joueur in present:
            a = mise_verif[joueur]
            if a != verif:
                tour = True
            else :
                tour = False
    else:
        tour = False
    

# river
if dealer != 'j'+str(nombre_de_joueurs-1):
    joueur_actuel = dealer+1
else:
    joueur_actuel = 'j0'

mise_minimale = petite_blinde
mise_verif={}
for i in range (0, nombre_de_joueurs):
    mise['j'+str(i)]=0

#vérifier que le tour n'est pas fini

if present != {}:
    verif = mise_verif[random.choice(present)]
    for joueur in present:
        a = mise_verif[joueur]
        if a != verif:
            tour = True
        else :
            tour = False
else:
    tour = False

while tour == True:

    if joueur_actuel in present: #toutes les actions qu'un joueur peut faire
        print('Voici les actions que tu peux faire :')
        if argent[joueur_actuel] >= mise_minimale:
            print("s'aligner")
            print("miser jusqu'à", str(argent[joueur_actuel]))
        print('se coucher')

        a = input('que veux-tu faire ? :', "s'aligner", "miser", "se coucher")
        while a == "s'aligner" or a == 'miser' or a == 'se coucher':
            a = input('que veux-tu faire ? :', "s'aligner", "miser", "se coucher") 
        if a == "s'aligner":
            mise[joueur_actuel] += mise_minimale
            mise_verif[joueur_actuel] = mise_minimale
            mise_minimale = mise_verif[joueur_actuel] 
        elif a == "miser":
            mettre = input('combien veux-tu miser ?', "jusqu'à", argent[joueur_actuel])
            mise[joueur_actuel] += mettre
            mise_verif[joueur_actuel] = mettre
            mise_minimale = mise_verif[joueur_actuel]
        else:
            present.pop(joueur_actuel)

    #changement de joueur_actuel

    if joueur_actuel == 'j'+str(nombre_de_joueurs-1):
        joueur_actuel == 'j0'
    else:
        joueur_actuel == 'j'+ str(numero_joueur_actuel+1)

    if present != {}:
        verif = mise_verif[random.choice(present)]
        for joueur in present:
            a = mise_verif[joueur]
            if a != verif:
                tour = True
            else :
                tour = False
    else:
        tour = False
